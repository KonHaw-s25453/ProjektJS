{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":5,"numPassedTests":14,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":6,"numTotalTests":15,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1764456293566,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Integration: upload -> DB (real DB required)"],"duration":2,"failureDetails":[{"message":"getaddrinfo ENOTFOUND 127.0.0.1 ","code":"ENOTFOUND","errno":-3008}],"failureMessages":["Error: getaddrinfo ENOTFOUND 127.0.0.1 \n    at Object.createConnectionPromise [as createConnection] (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\mysql2\\promise.js:19:31)\n    at Object.createConnection (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\__tests__\\integration.test.js:27:29)\n    at Promise.then.completed (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTestsForDescribeBlock (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-circus\\build\\run.js:95:7)\n    at _runTestsForDescribeBlock (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Integration: upload -> DB (real DB required) uploads Test.vcv and creates a patch row","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"uploads Test.vcv and creates a patch row"}],"endTime":1764456295203,"message":"  ● Integration: upload -> DB (real DB required) › uploads Test.vcv and creates a patch row\n\n    getaddrinfo ENOTFOUND 127.0.0.1\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m       password\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mDB_PASS\u001b[39m \u001b[33m||\u001b[39m \u001b[32m''\u001b[39m\n     \u001b[90m 26 |\u001b[39m     }\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m     adminConn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m mysql\u001b[33m.\u001b[39mcreateConnection(\u001b[33mObject\u001b[39m\u001b[33m.\u001b[39massign({}\u001b[33m,\u001b[39m adminOpts\u001b[33m,\u001b[39m { multipleStatements\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m\n     \u001b[90m 29 |\u001b[39m     \u001b[90m// create test database and run schema + seeds\u001b[39m\n     \u001b[90m 30 |\u001b[39m     \u001b[36mconst\u001b[39m schema \u001b[33m=\u001b[39m fs\u001b[33m.\u001b[39mreadFileSync(path\u001b[33m.\u001b[39mjoin(__dirname\u001b[33m,\u001b[39m \u001b[32m'..'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'schema.sql'\u001b[39m)\u001b[33m,\u001b[39m \u001b[32m'utf8'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.createConnectionPromise [as createConnection] (node_modules/mysql2/promise.js:19:31)\n      at Object.createConnection (__tests__/integration.test.js:27:29)\n","name":"C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\__tests__\\integration.test.js","startTime":1764456293718,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":92,"failureDetails":[],"failureMessages":[],"fullName":"upload of compressed .vcv (deflated JSON) parses and registers modules","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"upload of compressed .vcv (deflated JSON) parses and registers modules"},{"ancestorTitles":[],"duration":50,"failureDetails":[],"failureMessages":[],"fullName":"upload of plain JSON .vcv (not compressed) is handled","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"upload of plain JSON .vcv (not compressed) is handled"},{"ancestorTitles":[],"duration":136,"failureDetails":[],"failureMessages":[],"fullName":"patch listing supports filtering by user and category and since date","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"patch listing supports filtering by user and category and since date"},{"ancestorTitles":[],"duration":48,"failureDetails":[],"failureMessages":[],"fullName":"GET /patches/:id returns modules with plugin link and download serves file","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"GET /patches/:id returns modules with plugin link and download serves file"}],"endTime":1764456296231,"message":"","name":"C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\__tests__\\core.test.js","startTime":1764456295217,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["endpoint extra behaviors"],"duration":238,"failureDetails":[],"failureMessages":[],"fullName":"endpoint extra behaviors GET /download/:id returns 404 for missing patch","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /download/:id returns 404 for missing patch"},{"ancestorTitles":["endpoint extra behaviors"],"duration":222,"failureDetails":[],"failureMessages":[],"fullName":"endpoint extra behaviors when DB not configured endpoints return DB not configured","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"when DB not configured endpoints return DB not configured"}],"endTime":1764456296806,"message":"","name":"C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\__tests__\\endpoints_extra.test.js","startTime":1764456296239,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"GET /patches returns empty patches array with mock DB","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"GET /patches returns empty patches array with mock DB"},{"ancestorTitles":[],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"POST /upload without file returns 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /upload without file returns 400"},{"ancestorTitles":["Integration with fixture test.vcv (if present)"],"duration":47,"failureDetails":[],"failureMessages":[],"fullName":"Integration with fixture test.vcv (if present) POST /upload with test.vcv stores patch and returns patchId","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"POST /upload with test.vcv stores patch and returns patchId"}],"endTime":1764456297188,"message":"","name":"C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\__tests__\\patches.test.js","startTime":1764456296813,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":145,"failureDetails":[],"failureMessages":[],"fullName":"add tags to a patch and retrieve them","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"add tags to a patch and retrieve them"}],"endTime":1764456297714,"message":"","name":"C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\__tests__\\tags.test.js","startTime":1764456297197,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"tryParseVCV handles deflated JSON buffer","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"tryParseVCV handles deflated JSON buffer"},{"ancestorTitles":[],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"tryParseVCV handles plain JSON buffer","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"tryParseVCV handles plain JSON buffer"},{"ancestorTitles":[],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"tryParseVCV returns null for invalid data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"tryParseVCV returns null for invalid data"},{"ancestorTitles":[],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"extractModules finds nested modules and dedupes","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"extractModules finds nested modules and dedupes"}],"endTime":1764456298035,"message":"","name":"C:\\Users\\konhaw\\Desktop\\Uczelnia\\JS\\Projekt\\__tests__\\utils.test.js","startTime":1764456297726,"status":"passed","summary":""}],"wasInterrupted":false}
